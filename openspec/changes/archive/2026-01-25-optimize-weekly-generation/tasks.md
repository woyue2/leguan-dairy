## 1. 存储层优化
- [ ] 1.1 添加 getDiariesInDateRange(startDate, endDate) 方法
- [ ] 1.2 添加 getDiariesLastWeek() 方法
- [ ] 1.3 添加智能压缩方法 compressDiaryContent(content, maxLength)

## 2. API 层优化
- [ ] 2.1 实现周记内容压缩逻辑（单篇日记限制 N 字）
- [ ] 2.2 实现分批处理（超过 M 篇时分多次调用）
- [ ] 2.3 更新周记生成提示词（结构分析 + 变化流动）
- [ ] 2.4 更新 generateWeeklySummary 方法支持新参数

## 3. UI 层改版
- [ ] 3.1 改版周记选择界面：增加自然周选择器
- [ ] 3.2 显示选定范围内的日记列表（按日期分组）
- [ ] 3.3 优化提示文案（移除"至少4篇"硬性限制）
- [ ] 3.4 保留手动勾选功能（两种方式并存）
- [ ] 3.5 显示选定日记数量提示（但不阻止生成）

## 4. 测试验证
- [ ] 4.1 测试日期范围选择功能
- [ ] 4.2 测试智能压缩效果
- [ ] 4.3 测试分批处理（多篇日记场景）
- [ ] 4.4 测试 AI 生成质量（变化流动分析）
- [ ] 4.5 测试任意数量日记都能生成
